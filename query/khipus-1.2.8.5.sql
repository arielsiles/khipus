--Khipus MRP PROD-83: Implementar el re procesado de productos
--Diego H. Loza Fernandez
CREATE TABLE PRODUCTOREPROCESADO(
  IDPRODUCTOREPROCESADO  NUMBER(24) NOT NULL
  ,CANTIDAD NUMBER(6) NULL
  ,IDREPROCESADO NUMBER(24) NULL
  ,IDMETAPRODUCTOPRODUCCION NUMBER(24) NULL
  ,CONSTRAINT PK_PRODUCTOREPROCESADO PRIMARY KEY(IDPRODUCTOREPROCESADO)
);

ALTER TABLE PRODUCTOREPROCESADO 
ADD CONSTRAINT FK_REPROC_PRODUCTRE 
FOREIGN KEY(IDREPROCESADO) REFERENCES REPROCESADO(IDREPROCESADO);

ALTER TABLE PRODUCTOREPROCESADO
ADD CONSTRAINT FK_METAPROD_PRODREPROC 
FOREIGN KEY(IDMETAPRODUCTOPRODUCCION) REFERENCES METAPRODUCTOPRODUCCION(IDMETAPRODUCTOPRODUCCION);
--commit
CREATE TABLE REPROCESADO(
    IDREPROCESADO NUMBER(24) NOT NULL
    ,UNIDADES NUMBER(6) NULL
    ,VOLUMEN NUMBER(8,2) NULL
    ,IDORDENPRODUCCION NUMBER(24) NOT NULL
    ,IDMETAPRODUCTOPRODUCCION NUMBER(24) NULL
    ,CONSTRAINT PK_REPROCESADO PRIMARY KEY (IDREPROCESADO)
);

ALTER TABLE "EOS"."REPROCESADO" 
ADD CONSTRAINT "FK_ORDENPRO_REPROC" 
FOREIGN KEY ("IDORDENPRODUCCION") REFERENCES "EOS"."ORDENPRODUCCION" ("IDORDENPRODUCCION") ENABLE;

ALTER TABLE "EOS"."REPROCESADO"
ADD CONSTRAINT "FK_METAPROD_REPROC" 
FOREIGN KEY ("IDMETAPRODUCTOPRODUCCION") REFERENCES "EOS"."METAPRODUCTOPRODUCCION" ("IDMETAPRODUCTOPRODUCCION") ENABLE;
--commit
