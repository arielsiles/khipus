/* Ariel:01112013 - EMPLOYEE TIME CARD */
/* DROP TABLE EOS.TARJETATIEMPOEMPLEADO; */

CREATE TABLE EOS.TARJETATIEMPOEMPLEADO
(
  IDTARJETATIEMPOEMPLEADO       NUMBER(24)                   NOT NULL,
  HORAINICIO                    DATE                         NOT NULL,
  HORAFIN                       DATE                         NOT NULL,
  DESCRIPCION                   CLOB,
  IDEMPLEADO                    NUMBER(24)                   NOT NULL,
  IDORDENPRODUCCION             NUMBER(24)                   NULL,
  IDTIPOTAREAPROD               NUMBER(24)                   NOT NULL,
  IDCOMPANIA                    NUMBER(24)                   NOT NULL
);

ALTER TABLE EOS.TARJETATIEMPOEMPLEADO ADD CONSTRAINT PK_TARJETATIEMPOEMP PRIMARY KEY (IDTARJETATIEMPOEMPLEADO);
ALTER TABLE EOS.TARJETATIEMPOEMPLEADO ADD CONSTRAINT FK1029TARJETATIEMPOEMP FOREIGN KEY (IDCOMPANIA) REFERENCES EOS.COMPANIA (IDCOMPANIA);
ALTER TABLE EOS.TARJETATIEMPOEMPLEADO ADD CONSTRAINT FK1030TARJETATIEMPOEMP FOREIGN KEY (IDEMPLEADO) REFERENCES EOS.EMPLEADO (IDEMPLEADO);
ALTER TABLE EOS.TARJETATIEMPOEMPLEADO ADD CONSTRAINT FK_ORDENPRODUCCION_TARJETATIEM FOREIGN KEY (IDORDENPRODUCCION) REFERENCES EOS.ORDENPRODUCCION (IDORDENPRODUCCION);




insert into FUNCIONALIDAD (IDFUNCIONALIDAD,CODIGO,PERMISO,NOMBRERECURSO,IDMODULO) values ((select max(idfuncionalidad+1) from funcionalidad),'EMPLOYEETIMECARD','15','menu.production.employeeTimeCard','6');

--

CREATE TABLE EOS.TIPOTAREAPROD
(
    IDTIPOTAREAPROD NUMBER(24)                    NOT NULL,
    NOMBRE          VARCHAR2(100 CHAR)            NOT NULL,
    VERSION         NUMBER(24)                    NOT NULL,
    IDCOMPANIA      NUMBER(24)                    NOT NULL
);

ALTER TABLE EOS.TIPOTAREAPROD ADD CONSTRAINT PK_TIPOTAREAPROD PRIMARY KEY (IDTIPOTAREAPROD);

ALTER TABLE EOS.TARJETATIEMPOEMPLEADO ADD CONSTRAINT FK_TIPOTAREAPROD_TARJETATIEM FOREIGN KEY (IDTIPOTAREAPROD) REFERENCES EOS.TIPOTAREAPROD (IDTIPOTAREAPROD);